<!DOCTYPE html>
<html lang="es">
<head>
				<title>Sergi Collado &mdash; Articles tagged tdd</title>
		<meta charset="utf-8" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="http://sergicollado.com/theme/css/style.css" />
		<link rel='stylesheet' id='oswald-css'  href='http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="Sergi Collado — Flux Atom"
			href="http://sergicollado.com/" /> 
				<!--[if lte IE 8]><script src="http://sergicollado.com/theme/js/html5shiv.js"></script><![endif]-->
				<script src="/mint/?js" type="text/javascript"></script>
				</head>

<body class="home blog custom-background single-author" >
<a href="http://github.com/sergicollado/">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="http://sergicollado.com">Sergi Collado</a></h1>
						</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
										  						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://sergicollado.com/pages/proyectos.html">proyectos</a></li>
					  						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="http://sergicollado.com/pages/sobremi.html">Sobre mí</a></li>
					  															  						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://becodemyfriend.com" target="_blank">Becode</a></li>
					  						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://github.com/sergicollado" target="_blank">GIT-HUB</a></li>
					  					
				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
			<div class="page-title">
	<h2>Tagged with <span>tdd</span> &hellip;</h2>
</div>
		</div>
	
		<div id="contents">
						<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="http://sergicollado.com/sure.html">mié 08 mayo 2013</a></div>
							<div class="comments"><a href="http://sergicollado.com/sure.html#disqus_thread" title="Comment on Test más semánticos en Python con Sure">comments</a></div>
					</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="http://sergicollado.com/sure.html" title="Permalink to Test más semánticos en Python con Sure" rel="bookmark">Test más semánticos en Python con Sure</a>
		</h2>
		<div class="entry-content">
			<p>El módulo que incorpora python para hacer test unitarios es unittest,
con este, se puede empezar a hacer tdd fácilmente.
Personalmente prefiero la semántica de <a href="http://rspec.info/" target="_blank">repec</a> que la de los asserts de xUnit, 
La solución que yo he encontrado, es utilizar la librería <a href="http://falcao.it/sure/" target="_blank">Sure</a>, inspirada en should.js.</p>
<p>Para instalarla es muy sencillo, </p>
<div class="highlight"><pre>user@machine:~<span class="nv">$ </span><span class="o">[</span>sudo<span class="o">]</span> pip install sure
</pre></div>


<p>Es recomendable usar virtualenv para la instalación.</p>
<p>Una vez instalado podemos usarla  facilmente:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">sure</span>

<span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">equal</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">shouldnt</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">equal</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="c">#con colleciones</span>
<span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">}</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">equal</span><span class="p">({</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">})</span>
<span class="p">[]</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">empty</span><span class="p">;</span>
<span class="s">&quot;g&quot;</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="s">&quot;gabriel&quot;</span><span class="p">)</span>
</pre></div>


<p>Lo mejor es leerse la documentación que está en la página del proyecto, pero como podéis leer es muy intuitivo.</p>
<p>Para usarlo en nuestros tests podemos  sustituir los asserts típicos de unittest por los de Sure:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">sure</span>
<span class="kn">from</span> <span class="nn">map</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">TesTing</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mapa</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="s">&quot;textMap.tmx&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_entorno</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">equal</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
        <span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">greater_than</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_intialitation_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapa</span><span class="p">)</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">an</span><span class="p">(</span><span class="s">&#39;map.Map&#39;</span><span class="p">)</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapa</span><span class="p">)</span><span class="o">.</span><span class="n">should_not</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span> <span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>


<p>Si ponéis verbosity = 2 como argumento al arrancar unnittest.main veremos más datos al ejecutar los tests:</p>
<div class="highlight"><pre>test_entorno <span class="o">(</span>__main__.TesTing<span class="o">)</span> ... ok
test_intialitation_map <span class="o">(</span>__main__.TesTing<span class="o">)</span> ... ok

----------------------------------------------------------------------
Ran 2 tests in 0.201s

OK
</pre></div>


<h3>Algunos enlaces interesantes sobre sure:</h3>
<ul>
<li><a href="http://rspec.info/" target="_blank">repec</a></li>
<li><a href="http://falcao.it/sure/" target="_blank">Sure</a></li>
<li><a href="http://css.dzone.com/articles/tdd-python-5-minutes" target="_blank">Tdd en python</a></li>
</ul>
<p><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://sergicollado.com/sure.html" data-via="circun4" data-lang="es">Twittear</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>
<p><img alt="Hola" src="http://sergicollado.com/static/images/posts/sure.png" /></p>
		</div> <!--/#entry-content-->
		    		<span class="tag-links"><strong>Tagged</strong>
    			    			 <a href="http://sergicollado.com/tag/python.html" rel="tag">python</a>,  <a href="http://sergicollado.com/tag/sure.html" rel="tag">sure</a>,  <a href="http://sergicollado.com/tag/tdd.html" rel="tag">tdd</a>    		</span>
    		</div> <!--/#main-->
</div>  <!--/#post-->		<div class="navigation">
		</div>
		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://getpelican.com">Pelican</a>, theme by <a href="http://bunnyman.info">tBunnyMan</a>.</p>
							<script type="text/javascript">
					var _gaq = _gaq || [];
					_gaq.push(['_setAccount', '<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41990150-1', 'sergicollado.com');
  ga('send', 'pageview');
</script>']);
					_gaq.push(['_trackPageview']);
					(function() {
						var ga = document.createElement('script'); 
						ga.type = 'text/javascript'; ga.async = true;
						ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
						var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
					})();
				</script>
										<script type="text/javascript">
    var disqus_shortname = 'sergicollado';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>					</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>