<!DOCTYPE html>
<html lang="es">
<head>
				<title>Sergi Collado &mdash; Articles in Category Dev</title>
		<meta charset="utf-8" />
		<link rel="profile" href="http://gmpg.org/xfn/11" />
		<link rel="stylesheet" type="text/css" href="../theme/css/style.css" />
		<link rel='stylesheet' id='oswald-css'  href='http://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2' type='text/css' media='all' />
		<style type="text/css">
			body.custom-background { background-color: #f5f5f5; }
		</style>
		<link rel="alternate" type="application/atom+xml"
			title="Sergi Collado — Flux Atom"
			href="../" /> 
				<!--[if lte IE 8]><script src="../theme/js/html5shiv.js"></script><![endif]-->
				<script src="/mint/?js" type="text/javascript"></script>
				</head>

<body class="home blog custom-background single-author" >
<a href="http://github.com/sergicollado/">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
	<div id="container">
		<div id="header">
				<h1 id="site-title"><a href="..">Sergi Collado</a></h1>
						</div><!-- /#banner -->
		
		<div id="menu">
			<div class="menu-navigation-container">
				<ul id="menu-navigation" class="menu">
										  						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="../pages/proyectos.html">proyectos</a></li>
					  						<li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="../pages/sobremi.html">Sobre mí</a></li>
					  															  						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://becodemyfriend.com" target="_blank">Becode</a></li>
					  						<li  class="active" class="menu-item menu-item-type-post_type menu-item-object-page"><a href="https://github.com/sergicollado" target="_blank">GIT-HUB</a></li>
					  					
				</ul>
			</div> <!--/#menu-navigation-container-->
		</div><!-- /#menu -->
		
		<div class="page-title">
			<div class="page-title">
	<h2>Filed under <span>Dev</span> &hellip;</h2>
</div>
		</div>
	
		<div id="contents">
						<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="../tmxscene.html">jue 20 junio 2013</a></div>
							<div class="comments"><a href="../tmxscene.html#disqus_thread" title="Comment on Librería tmxScene python-sfml python">comments</a></div>
					</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="../tmxscene.html" title="Permalink to Librería tmxScene python-sfml python" rel="bookmark">Librería tmxScene python-sfml python</a>
		</h2>
		<div class="entry-content">
			<p><img alt="sfml" src="../static/images/posts/sfml-logo.png" /></p>
<p>Últimamente me he propuesto hacer juego en python y de paso probar <a href="http://www.python-sfml.org/index.html" target="_blank">Python-sfml</a> que me parece muy interesante.</p>
<p>El primer paso ha consistedo en crear una librería para poder usar el maravilloso software <a href="http://www.mapeditor.org/" target="_blank">tiled</a> y así editar los niveles del juego con toda la potencia que te da esta herramienta.</p>
<p>Su utilización es bastante sencilla, hasta que la empaquete y se pueda instalar mediante pip, simplemente debemos clonar el <a href="https://github.com/sergicollado/sceneTmx" target="_blank">repositorio</a> el múdulo en cuestión se corresponde con la carpeta scene.</p>
<p>tmxScene tiene como dependecia el módulo tmxlib y lo he desarrollado en Python 2.7, se puede instalar fácilmente desde Pip:</p>
<div class="highlight"><pre>    <span class="n">pip</span> <span class="n">install</span> <span class="n">tmxlib</span>
</pre></div>


<p>El repositorio es en sí mismo un ejemplo de como se puede utilizar, puedes echar un vistazo al script de entrada main.py </p>
<div class="highlight"><pre>    <span class="kn">import</span> <span class="nn">sfml</span> <span class="kn">as</span> <span class="nn">sf</span>
    <span class="kn">from</span> <span class="nn">config</span> <span class="kn">import</span> <span class="o">*</span>
    <span class="kn">import</span> <span class="nn">scene</span>
    <span class="kn">import</span> <span class="nn">character</span>
    <span class="kn">from</span> <span class="nn">scene.renderer</span> <span class="kn">import</span> <span class="n">drawables</span>

    <span class="n">width</span> <span class="o">=</span> <span class="mi">1280</span>
    <span class="n">height</span> <span class="o">=</span> <span class="mi">820</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">RenderWindow</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">VideoMode</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">),</span> <span class="s">&quot;pySFML Window&quot;</span><span class="p">)</span>
    <span class="n">window</span><span class="o">.</span><span class="n">framerate_limit</span> <span class="o">=</span> <span class="mi">60</span>
    <span class="n">window</span><span class="o">.</span><span class="n">vertical_synchronization</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="n">clock</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>


    <span class="k">try</span><span class="p">:</span>
        <span class="n">texture</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">Texture</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">IMAGES_PATH</span><span class="o">+</span><span class="s">&quot;twilight-tiles.png&quot;</span><span class="p">)</span>

        <span class="n">sprites</span> <span class="o">=</span> <span class="n">drawables</span><span class="o">.</span><span class="n">Sprites</span><span class="p">()</span>
        <span class="n">scene</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">Scene</span><span class="p">(</span><span class="n">MAPS_PATH</span><span class="o">+</span><span class="s">&quot;textMap.tmx&quot;</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">sprites</span><span class="p">)</span>
        <span class="n">scene</span><span class="o">.</span><span class="n">set_images_path</span><span class="p">(</span><span class="n">IMAGES_PATH</span><span class="p">)</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;c2&#39;</span> <span class="p">,</span> <span class="s">&#39;distance&#39;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;c1&#39;</span> <span class="p">,</span> <span class="s">&#39;distance&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
        <span class="p">]</span>
        <span class="n">scene</span><span class="o">.</span><span class="n">set_visible_layers</span><span class="p">(</span><span class="n">layers</span><span class="p">)</span>


        <span class="n">player</span> <span class="o">=</span> <span class="n">character</span><span class="o">.</span><span class="n">Character</span><span class="p">(</span><span class="n">IMAGES_PATH</span><span class="o">+</span><span class="s">&quot;mikeypebalz.png&quot;</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span> <span class="n">sprites</span><span class="p">)</span>
        <span class="n">player</span><span class="o">.</span><span class="n">set_velocity</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span> 
        <span class="k">print</span> <span class="ne">IOError</span>
        <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">while</span> <span class="n">window</span><span class="o">.</span><span class="n">is_open</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">window</span><span class="o">.</span><span class="n">events</span><span class="p">:</span>

            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">is</span> <span class="n">sf</span><span class="o">.</span><span class="n">CloseEvent</span> <span class="ow">or</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">is_key_pressed</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">ESCAPE</span><span class="p">):</span>
                <span class="n">window</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">is_key_pressed</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">):</span>
                <span class="n">scene</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">panning_right</span><span class="p">()</span>
                <span class="n">player</span><span class="o">.</span><span class="n">horizontal_aceleration</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">is_key_pressed</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">LEFT</span><span class="p">):</span>
                <span class="n">scene</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">panning_left</span><span class="p">()</span>
                <span class="n">player</span><span class="o">.</span><span class="n">horizontal_deceleration</span><span class="p">()</span> <span class="n">e</span>

            <span class="k">if</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">is_key_pressed</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">UP</span><span class="p">):</span>
                <span class="n">scene</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">panning_top</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">is_key_pressed</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Keyboard</span><span class="o">.</span><span class="n">DOWN</span><span class="p">):</span>
                <span class="n">scene</span><span class="o">.</span><span class="n">cam</span><span class="o">.</span><span class="n">panning_down</span><span class="p">()</span>

        <span class="n">time</span>  <span class="o">=</span> <span class="n">clock</span><span class="o">.</span><span class="n">restart</span><span class="p">()</span><span class="o">.</span><span class="n">seconds</span><span class="o">*</span><span class="mi">10</span>
        <span class="n">window</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span> 
        <span class="n">scene</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>
        <span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
        <span class="n">player</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>
        <span class="n">player</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
        <span class="n">window</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</pre></div>


<h3>Algunos enlaces interesantes:</h3>
<ul>
<li><a href="http://www.mapeditor.org/" target="_blank">tiled</a></li>
<li><a href="https://github.com/sergicollado/sceneTmx" target="_blank">repositorio</a></li>
<li><a href="http://www.python-sfml.org/index.html" target="_blank">Python-sfml</a></li>
</ul>
<p><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://sergicollado.com/tmxscene.html" data-via="circun4" data-lang="es">Twittear</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>
		</div> <!--/#entry-content-->
		    		<span class="tag-links"><strong>Tagged</strong>
    			    			 <a href="../tag/python.html" rel="tag">python</a>,  <a href="../tag/sfml.html" rel="tag">sfml</a>,  <a href="../tag/tiled.html" rel="tag">tiled</a>,  <a href="../tag/tmx.html" rel="tag">tmx</a>,  <a href="../tag/tmxscene.html" rel="tag">tmxScene</a>    		</span>
    		</div> <!--/#main-->
</div>  <!--/#post-->			<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="../YiiExtendsModel.html">mié 08 mayo 2013</a></div>
							<div class="comments"><a href="../YiiExtendsModel.html#disqus_thread" title="Comment on Extendiendo Model CActiveRecord">comments</a></div>
					</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="../YiiExtendsModel.html" title="Permalink to Extendiendo Model CActiveRecord" rel="bookmark">Extendiendo Model CActiveRecord</a>
		</h2>
		<div class="entry-content">
			<p>La mayoría de Frameworks para crear webs, nos sirven de gran ayuda a la hora de estructurar nuestro código y ayudarnos con miles de funcionalidades.
A veces estas ventajas se transforman en desventajas, dificultando la versatilidad de la toma de decisiones, haciéndonos perder más tiempo del que debíeramos.</p>
<p>Últimamente he usado el Framework Yii, en un par de proyectos.
En Yii se pueden crear módulos, widgets y componentes, así puedes descargar la lógica de los controladores, consiguiendo un código más legible.</p>
<p>Puedes encontrar el código en <a href="https://github.com/sergicollado/blog-examples/blob/master/CModelWithFile.php" target="_blank">MiGitHub</a> </p>
<p>Cómo ejemplo me voy a centrar en una clase que he hecho estos días:</p>
<div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="c1">//A field named &#39;file&#39; is required&#39; </span>
<span class="k">class</span> <span class="nc">CModelWithFile</span> <span class="k">extends</span> <span class="nx">CActiveRecord</span><span class="p">{</span>

    <span class="k">public</span> <span class="nv">$file_uploaded</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">saveWithImage</span><span class="p">(</span><span class="nv">$post</span><span class="p">){</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">attributes</span><span class="o">=</span><span class="nv">$post</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">())</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">saveFile</span><span class="p">();</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">function</span> <span class="nf">saveFile</span><span class="p">(){</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">file_uploaded</span>   <span class="o">=</span>   <span class="nx">CUploadedFile</span><span class="o">::</span><span class="na">getInstance</span><span class="p">(</span><span class="nv">$this</span><span class="p">,</span><span class="s1">&#39;file_uploaded&#39;</span><span class="p">);</span>
        <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">file_uploaded</span><span class="p">)</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">file</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="nv">$location_image</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getFileLocation</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">file</span> <span class="o">=</span>  <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">moveFile</span><span class="p">(</span><span class="nv">$location_image</span><span class="p">,</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">file_uploaded</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">function</span> <span class="nf">moveFile</span><span class="p">(</span><span class="nv">$folder</span><span class="p">,</span><span class="nv">$file_uploaded</span><span class="p">){</span>
        <span class="nv">$image_name</span><span class="o">=</span> <span class="nb">md5</span><span class="p">(</span><span class="nv">$file_uploaded</span><span class="o">.</span><span class="s1">&#39;algoparacodificar&#39;</span><span class="p">)</span><span class="o">.</span><span class="nv">$file_uploaded</span><span class="p">;</span>
        <span class="nv">$image_name</span> <span class="o">=</span> <span class="nx">strtolower</span><span class="p">(</span><span class="nv">$image_name</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createDirectory</span><span class="p">();</span>
        <span class="nv">$file_uploaded</span><span class="o">-&gt;</span><span class="na">saveAs</span><span class="p">(</span><span class="nv">$folder</span><span class="o">.</span><span class="nv">$image_name</span><span class="p">);</span>
        <span class="k">return</span> <span class="nv">$image_name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">function</span> <span class="nf">getFileUrl</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nx">Yii</span><span class="o">::</span><span class="na">app</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getBaseUrl</span><span class="p">(</span><span class="k">true</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;/images/&#39;</span><span class="o">.</span><span class="nb">get_class</span><span class="p">(</span><span class="nv">$this</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">private</span> <span class="k">function</span> <span class="nf">getFileLocation</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nx">Yii</span><span class="o">::</span><span class="na">getPathOfAlias</span><span class="p">(</span><span class="s1">&#39;webroot&#39;</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;/images/&#39;</span><span class="o">.</span><span class="nb">get_class</span><span class="p">(</span><span class="nv">$this</span><span class="p">)</span><span class="o">.</span><span class="s1">&#39;/&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">showImageFile</span><span class="p">(){</span>
        <span class="k">if</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">file</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">        &lt;li class=&quot;span3&quot;&gt;</span>
<span class="x">            &lt;a href=&quot;#&quot; class=&quot;thumbnail&quot; rel=&quot;tooltip&quot; data-title=&quot;Imagen&quot;&gt;</span>
<span class="x">            </span><span class="cp">&lt;?php</span> <span class="nv">$root</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getFileUrl</span><span class="p">()</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">file</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="x"></span>
<span class="x">                &lt;img src=&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$root</span><span class="p">;</span><span class="cp">?&gt;</span><span class="x">&quot; /&gt;</span>
<span class="x">            &lt;/a&gt;</span>
<span class="x">        &lt;/li&gt;</span>
<span class="x">        </span><span class="cp">&lt;?php</span> <span class="k">endif</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">function</span> <span class="nf">createDirectory</span><span class="p">(){</span>
        <span class="nv">$directory</span> <span class="o">=</span> <span class="nb">rtrim</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getFileLocation</span><span class="p">(),</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">is_dir</span><span class="p">(</span><span class="nv">$directory</span><span class="p">))</span>
            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>

        <span class="nb">mkdir</span><span class="p">(</span><span class="nv">$directory</span><span class="p">);</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>


<p>Un gran número de entidades tienen la necesidad de subir algún tipo de archivo.
Además Yii te ofrece una manera fácil de validar atributos que llegan de un post.
Si toda la lógica necesaria para ambas cosas las dejamos en un método del controlador, el resultado es un montón de código repetido.</p>
<p>Para que funcione esta clase, tendríamos que tener una columna de tipoo string llamada 'file';
El modo de uso es muy sencillo :</p>
<div class="highlight"><pre><span class="cp">&lt;?php</span> 
<span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;Project&#39;</span><span class="p">]))</span>
<span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$model</span><span class="o">-&gt;</span><span class="na">saveWithImage</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;Project&#39;</span><span class="p">]))</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">,</span><span class="s1">&#39;id&#39;</span><span class="o">=&gt;</span><span class="nv">$model</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>


<p>Podríamos sobreescribir los métodos getFileLocation y getFileUrl para modificar la carpeta dónde se guardará la imagen.</p>
<p>Me he permitido añadir la función createDirectory, que  detectaría automáticamente si existe la carpeta donde deseamos guardar los archivos y la crearía, por defecto la carpeta images/NombreDelModelo... eso sí, debería estar creada la carpeta images en la raíz.</p>
<p>También he incluido el método showImageFile, que nos serviría de manera sencilla para renderizar en html la imagen, cuando esta se encuentre disponible, por ejemplo en el formulario de actualización. Este método debería estar en un widget o similar, dada su funcionalidad.</p>
<h3>Algunos enlaces interesantes sobre Yii:</h3>
<ul>
<li><a href="http://www.yiiframework.com/doc/guide/1.1/en/extension.create" target="_blank">Yii</a></li>
</ul>
<p><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://sergicollado.com/YiiExtendsModel.html" data-via="circun4" data-lang="es">Twittear</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>
<p><img alt="YiiLogo" src="../static/images/posts/yii.png" /></p>
		</div> <!--/#entry-content-->
		    		<span class="tag-links"><strong>Tagged</strong>
    			    			 <a href="../tag/activerecord.html" rel="tag">ActiveRecord</a>,  <a href="../tag/yii.html" rel="tag">Yii</a>,  <a href="../tag/extends.html" rel="tag">extends</a>,  <a href="../tag/php.html" rel="tag">php</a>    		</span>
    		</div> <!--/#main-->
</div>  <!--/#post-->			<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="../sure.html">mié 08 mayo 2013</a></div>
							<div class="comments"><a href="../sure.html#disqus_thread" title="Comment on Test más semánticos en Python con Sure">comments</a></div>
					</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="../sure.html" title="Permalink to Test más semánticos en Python con Sure" rel="bookmark">Test más semánticos en Python con Sure</a>
		</h2>
		<div class="entry-content">
			<p>El módulo que incorpora python para hacer test unitarios es unittest,
con este, se puede empezar a hacer tdd fácilmente.
Personalmente prefiero la semántica de <a href="http://rspec.info/" target="_blank">repec</a> que la de los asserts de xUnit, 
La solución que yo he encontrado, es utilizar la librería <a href="http://falcao.it/sure/" target="_blank">Sure</a>, inspirada en should.js.</p>
<p>Para instalarla es muy sencillo, </p>
<div class="highlight"><pre>user@machine:~<span class="nv">$ </span><span class="o">[</span>sudo<span class="o">]</span> pip install sure
</pre></div>


<p>Es recomendable usar virtualenv para la instalación.</p>
<p>Una vez instalado podemos usarla  facilmente:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">sure</span>

<span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">equal</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">shouldnt</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">equal</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="c">#con colleciones</span>
<span class="p">{</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">}</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">equal</span><span class="p">({</span><span class="s">&#39;foo&#39;</span><span class="p">:</span> <span class="s">&#39;bar&#39;</span><span class="p">})</span>
<span class="p">[]</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">empty</span><span class="p">;</span>
<span class="s">&quot;g&quot;</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">within</span><span class="p">(</span><span class="s">&quot;gabriel&quot;</span><span class="p">)</span>
</pre></div>


<p>Lo mejor es leerse la documentación que está en la página del proyecto, pero como podéis leer es muy intuitivo.</p>
<p>Para usarlo en nuestros tests podemos  sustituir los asserts típicos de unittest por los de Sure:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">sure</span>
<span class="kn">from</span> <span class="nn">map</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">class</span> <span class="nc">TesTing</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mapa</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="s">&quot;textMap.tmx&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_entorno</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">equal</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
        <span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">greater_than</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_intialitation_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapa</span><span class="p">)</span><span class="o">.</span><span class="n">should</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">an</span><span class="p">(</span><span class="s">&#39;map.Map&#39;</span><span class="p">)</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mapa</span><span class="p">)</span><span class="o">.</span><span class="n">should_not</span><span class="o">.</span><span class="n">be</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span> <span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">verbosity</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>


<p>Si ponéis verbosity = 2 como argumento al arrancar unnittest.main veremos más datos al ejecutar los tests:</p>
<div class="highlight"><pre>test_entorno <span class="o">(</span>__main__.TesTing<span class="o">)</span> ... ok
test_intialitation_map <span class="o">(</span>__main__.TesTing<span class="o">)</span> ... ok

----------------------------------------------------------------------
Ran 2 tests in 0.201s

OK
</pre></div>


<h3>Algunos enlaces interesantes sobre sure:</h3>
<ul>
<li><a href="http://rspec.info/" target="_blank">repec</a></li>
<li><a href="http://falcao.it/sure/" target="_blank">Sure</a></li>
<li><a href="http://css.dzone.com/articles/tdd-python-5-minutes" target="_blank">Tdd en python</a></li>
</ul>
<p><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://sergicollado.com/sure.html" data-via="circun4" data-lang="es">Twittear</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>
<p><img alt="Hola" src="../static/images/posts/sure.png" /></p>
		</div> <!--/#entry-content-->
		    		<span class="tag-links"><strong>Tagged</strong>
    			    			 <a href="../tag/python.html" rel="tag">python</a>,  <a href="../tag/sure.html" rel="tag">sure</a>,  <a href="../tag/tdd.html" rel="tag">tdd</a>    		</span>
    		</div> <!--/#main-->
</div>  <!--/#post-->			<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="../git-interesting.html">vie 03 mayo 2013</a></div>
							<div class="comments"><a href="../git-interesting.html#disqus_thread" title="Comment on Comandos útiles git">comments</a></div>
					</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="../git-interesting.html" title="Permalink to Comandos útiles git" rel="bookmark">Comandos útiles git</a>
		</h2>
		<div class="entry-content">
			<p>Algunos pequeños e útiles comandos de git que te hacen la vida más sencilla:</p>
<div class="highlight"><pre><span class="c">#delete all removed files</span>
git rm <span class="k">$(</span>git ls-files --deleted<span class="k">)</span>

<span class="c">#delete untracked files</span>
git clean -f
<span class="c">#if you want to also remove directories, run </span>
git clean -f -d

<span class="c">#ignore mode changes chmod</span>
git config core.filemode <span class="nb">false</span>
<span class="c"># or global:</span>
git config --global core.filemode <span class="nb">false</span>
</pre></div>


<h3>Algunos enlaces interesantes sobre git:</h3>
<ul>
<li><a href="http://wildlyinaccurate.com/deploying-a-git-repository-to-a-remote-server" target="_blank">deploying</a></li>
</ul>
<p><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://sergicollado.com/git-interesting.html" data-via="circun4" data-lang="es">Twittear</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>
<p><img alt="Hola" src="../static/images/posts/git.png" /></p>
		</div> <!--/#entry-content-->
		    		<span class="tag-links"><strong>Tagged</strong>
    			    			 <a href="../tag/deploy.html" rel="tag">deploy</a>,  <a href="../tag/git.html" rel="tag">git</a>    		</span>
    		</div> <!--/#main-->
</div>  <!--/#post-->			<div class="post type-post status-publish format-standard hentry category-general" id="post">
	<div class="entry-meta">
		<div class="date"><a href="../my-first-post.html">jue 02 mayo 2013</a></div>
							<div class="comments"><a href="../my-first-post.html#disqus_thread" title="Comment on Hola, bienvenido a mi blog personal">comments</a></div>
					</div> <!-- /#entry-meta -->
	<div class="main">
		<h2 class="entry-title">
			<a href="../my-first-post.html" title="Permalink to Hola, bienvenido a mi blog personal" rel="bookmark">Hola, bienvenido a mi blog personal</a>
		</h2>
		<div class="entry-content">
			<p>Hello World!</p>
<p>Este es la primera entrada de mi nuevo blog,hecho con <a href="http://docs.getpelican.com" target="_blank">Pelican</a>.</p>
<h3>Enlaces interesantes para tener tu blog estático:</h3>
<ul>
<li><a href="http://docs.getpelican.com" target="_blank">Pelican</a></li>
<li><a href="http://joedicastro.com/tag/pelican.html" target="_blank">Joe di castro</a></li>
<li><a href="http://es.wikipedia.org/wiki/Markdown" target="_blank">MarkDown</a></li>
</ul>
<p><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://sergicollado.com/my-first-post.html" data-via="circun4" data-lang="es">Twittear</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>
<p><img alt="Hola" src="../static/images/cosmo.png" /></p>
		</div> <!--/#entry-content-->
		    		<span class="tag-links"><strong>Tagged</strong>
    			    			 <a href="../tag/dev.html" rel="tag">dev</a>,  <a href="../tag/hello.html" rel="tag">hello</a>,  <a href="../tag/pelican.html" rel="tag">pelican</a>,  <a href="../tag/python.html" rel="tag">python</a>    		</span>
    		</div> <!--/#main-->
</div>  <!--/#post-->		<div class="navigation">
		</div>
		</div>
		
		<div id="footer">
			<p>Powered by <a href="http://getpelican.com">Pelican</a>, theme by <a href="http://bunnyman.info">tBunnyMan</a>.</p>
										<script type="text/javascript">
    var disqus_shortname = 'sergicollado';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>					</div><!-- /#footer -->
	</div><!-- /#container -->
	<div style="display:none"></div>
</body>
</html>